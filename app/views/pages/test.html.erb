

<% categories = Book.all.map{|t| t.category}.uniq%>
    <%categories.each do |category|%>

<button class= "filter-button" >
  <%= categories = Book.all.map{|t| t.category}.uniq %>

  <%categories.each do |category|%>
  <%= link_to books_path do %>
  <%= image_tag "Book Collection" %>
<% end %>


  </button>
 <% end %>


<div class="container" style= "margin-top: 140px;">
      <%= link_to "Logout", destroy_user_session_path, data: {turbo_method: :delete} %>
      <%= link_to "Profile", user_profile_path(current_user.id)%>
  </div>


<%= link_to "Add a book", new_book_book_copy_path(@book) %>

<%= link_to new_book_book_review_path(@book, @bookreview) do %>
     <p class="dashboard-order-status me-2" style="background-color: pink"><strong>Leave a review ðŸ˜Ž</strong></p>
     <% end %>

               <button>
<%= link_to "reviews", "form_modal", books: @books %>
<%= turbo_stream.replace "remote_modal" do %>
<% end %>
</button>


<div class="second-lists">
 <%= render "books/irish", books: @books %>

</div>




<%= simple_form_for [@book, @bookreview] do |f| %>
  <%= f.input :content %>
  <%= f.input :rating, :collection => [1, 2, 3, 4, 5] %>
  <%= f.submit "Submit review", class: "btn btn-primary" %>
<% end %>

<div class="book-copy-card">
  <% if @book.book_reviews.blank? %>

          Be the first to leave a review for <%= @book.title %>
            <% else %>
          <% @book.book_reviews.each do |review| %>
          <div class="book-copies">

            <p><%= review.content %></p>
             <p><%= review.rating %></p>
              <p><%= review.user.display_name %></p>
          <% end %>
        </div>
  <% end %>
</div> %>


<%= turbo_frame_tag :remote_modal, target: :_top do %>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
 aria-hidden="true" data_controller="bs_modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>



<div class="modal-container">
  <button onclick="document.getElementById('id01').style.display='block'" class="w3-button w3-black">Leave a review</button>

  <div id="id01" class="w3-modal">
    <div class="modal-content">
      <div class="w3-container">
        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>

          <%= render "book_reviews/form_modal", books: @books %>
          </div>

      </div>
    </div>
  </div>
</div>

<div class="modal-container">
  <button onclick="document.getElementById('id01').style.display='block'" class="w3-button w3-black">Leave a review</button>

  <div id="id01" class="w3-modal">
    <div class="modal-content">
      <div class="w3-container">
        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>

          <%= render "book_reviews/form_modal", books: @books %>
          </div>

      </div>
    </div>
  </div>
</div>


 onclick="document.getElementById('id1').style.color = 'red'"




<% if @book.book_reviews.blank? %>
                    Be the first to leave a review for <%= @book.title %>
                <% else %>
                  <div class="book-copy-card">
                      <% @book.book_reviews.each do |review| %>
                          <div class="book-copies">
                            <div class="img-comments">
                                <% if review.user.photo.attached?%>
                                        <%= cl_image_tag review.user.photo.key, class:"avatar-bordered-small" %>
                                <% else %>
                                  <div class='avatar-bordered-small d-flex justify-content-center align-items-center' style= "padding-right: 9px; background-color: #75c9b7;" >
                                  <p style="font-size: 1rem"><%= render "shared/default_profile_image", user: review.user %></p>
                                </div>
                            <% end %>

                              <ul>
                                <li><em>"<%=review.content %>"</em></li>
                                <li><%=review.user.display_name || review.user.first_name %></li>
                                <li><%=review.created_at.strftime("%a, %d %b %y") %></li>
                              </ul>
                            </div>
                            <%  rating = review.rating%>
                            <% rating.times do |i| %>
                              <i class="fa-solid fa-book-open" style="color: #fa8334; font-size: 10px;"></i>
                            <% end %>
                            <% (5-rating).times do |i| %>
                              <i class="fa-solid fa-book-open" style="color: #b2b1b1; font-size: 10px;"></i>
                            <% end %>


                          </div>
                        <% end %>
                  </div>


                  <div data-controller="search-books">
  <%= render "shared/navbar" %>
   <div data-search-books-target="list" data-filter-books-target="book" class="container" style="margin-top: 130px;">


        <div class="container m-0 p-0 justify-content-center">
          <div class="row m-0 p-0  justify-content-center">
            <%= render "books/list", book: @book %>
           </div>
         </div>

          </div>
         </div>
